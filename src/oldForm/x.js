var pubsub = {}; /n     (function (q) { /n         var topics = {}, /n             subUid = -1; /n       // 发布或广播事件，包含特定的topic名称和参数（比如传递的数据） /n       q.publish = function (topic, args) { /n         if (!topics[topic]) { /n             return false; /n           } /n           var subscribers = topics[topic], /n               len = subscribers ? subscribers.length : 0; /n           while (len--) { /n               subscribers[len].func(topic, args); /n           } /n           return this; /n   }; /n   // 通过特定的名称和回调函数订阅事件，topic/event触发时执行事件 /n   q.subscribe = function (topic, func) { /n     if (!topics[topic]) { /n             topics[topic] = []; /n     } /n     var token = (++subUid).toString(); /n     topics[topic].push({ /n             token: token, /n             func: func /n     }); /n     return token; /n   }; /n   //基于订阅上的标记引用，通过特定topic取消订阅 /n   q.unsubscribe = function (token) { /n     for (var m in topics) { /n             if (topics[m]) { /n               for (var i = 0, j = topics[m].length; i ＜ j; i++) { /n                     if (topics[m][i].token === token) { /n                       topics[m].splice(i, 1); /n                       return token; /n                     } /n               } /n             } /n     } return this; /n     }; 